//-
	Main layout page.
	All universal links and meta tags are here. Body includes nav and main at the top. Nav is outside of main. 
	Content of pages are located within main.
	PARAM
		title		[String] Title of page; if doesn't exist, will be replaced by "Untitled Page"
		alert		[String] (Optional) When page loads, create JS alert with message.
	CALLED FROM
		none
	EXTENDED FROM
		All pages
	INCLUDES
		nav
		main
	//
doctype html
html
	head
		style.
			html, #page{
				background-color: var(--background);
				background-image: url("/images/infinite-recharge-trim-blur.png");
				background-repeat: no-repeat;
				background-position: left bottom;
				background-attachment: fixed;
			}
		base(href="/")
		if !title
			- title = "Untitled Page"
		title #{title} | Scoutradioz
		meta(name="keywords" content="first robotics,frc,first robotics competition,somerville,new jersey,102,team 102,gearheads,gearheads 102,the gearheads,scoring,scoring app,standings,match standings,team 102 scoring app,scouting,gearheads scouting,team 102 scouting")
		meta(name="theme-color" content="#333")
		meta(name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")
		link(rel="icon" type="image/png" href=`${fileRoot}/favicon.png`)
		//link(rel="icon" sizes="192x192" href=`favicon-192x.png`)
		link(rel="stylesheet" href=`${fileRoot}/lib/w3.css`)
		link(rel="stylesheet" href=`${fileRoot}/lib/mmenu/mmenu.css`)
		link(rel="stylesheet" href=`${fileRoot}/lib/mmenu/mburger.css`)
		link(rel="stylesheet" href=`${fileRoot}/css/theme-2019.css?v=2`)
		link(rel="stylesheet" href=`${fileRoot}/css/w3-additions.css?v=1`)
		
		script(src=`${fileRoot}/lib/w3.js`)
		script(src=`${fileRoot}/lib/jquery.min.js`)
		script(src=`${fileRoot}/lib/mmenu/mmenu.js`)
		script(src=`${fileRoot}/lib/mmenu/mburger.js`)
		//Hacky way to force clients to download the new version of scripts/stylesheets: Add a "v" query at the end of the string
		script(src=`${fileRoot}/js/scoutradioz.js?v=2`)
		script(src=`${fileRoot}/js/FormSubmission.js`)
		script(src=`${fileRoot}/js/NotificationCard.js`)
		if alert && alert != "undefined"
			script.
				$(function(){
					var alertType = '#{alertType}';
					var alert = `#{alert.replace(/'/, '\'')}`;
					//alert("#{alert}");
					NotificationCard.show(alert, {
						ttl: 0, 
						exitable: true, 
						type: alertType
					});
					
					//Remove alert and type from url queries so it doesn't appear again when the user refreshes
					var url = window.location.href;
					
					if( url.indexOf('&') == -1 ){
						var queries = [url.split('?')[1]];
					}
					else{
						var queries = url.split('&');
						queries[0] = queries[0].split('?')[1];
					}
					
					//splice alert and type from queries array
					for(var i = 0; i < queries.length; i++){
						console.log(queries[i].split('='));
						if( queries[i].split('=')[0] == 'alert'){
							queries.splice(i, 1);
							i--;
						}
						else if (queries[i].split('=')[0] == 'type') {
							queries.splice(i, 1);
							i--;
						}
					}
					
					url = url.split('?')[0]
					
					//add other queries back into url
					if(queries[0]){
						
						url += '?' + queries[0];
						
						for(var i = 1; i < queries.length; i++){
							url += '&' + queries[i];
						}
					}
					
					window.history.replaceState({}, document.title, url);
				});
	
	body(class="theme-text")
		//div(class="menu-blank")
		div(id="page" style="font-size:1.1em")
			include newnav
			main(class="w3-padding w3-mobile w3-center" id="content") 
				block content
			//Footer not included becasue it modifies the body's styling.
			//-include footer
			//div(class="gear-space" style="position: fixed; top: 0px; left: 0px; height: 100%; width: 100%; z-index: -1;")